"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[131],{1131:function(e,t,n){n.r(t),n.d(t,{default:function(){return re}});var a=n(2791),i=n(586),o=n(3388),r=n(4056),l=n(1087),s=n(7689),c=n(8935),d=n(7309),u=n(184);function m(){return(0,u.jsx)(c.ZP,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:(0,u.jsx)(l.rU,{to:"/",children:(0,u.jsx)(d.Z,{type:"primary",children:"Back Home"})})})}var h=n(1413),x=n(9439),f=n(7027),p=n(43),Z=n(6106),j=n(914),g=n(7615),v=n(458),y=n(1717),b=n(1429),S=n(8302),C=n(7106),w=n(5671),k=n(3144),A=n(7205),T=function(){function e(){(0,w.Z)(this,e)}return(0,k.Z)(e,null,[{key:"list",value:function(e){return A.Z.get(this.baseURL+"/list",{params:e})}},{key:"detail",value:function(e,t){return A.Z.get(this.baseURL+"/details/"+e,{params:t})}},{key:"save",value:function(e){return A.Z.post(this.baseURL+"/save",e)}},{key:"delete",value:function(e){return A.Z.post(this.baseURL+"/delete",{ids:e})}},{key:"balance",value:function(e){return A.Z.get(this.baseURL+"/get-balence",{params:e})}}]),e}();T.baseURL="transation";var I=function(){function e(){(0,w.Z)(this,e)}return(0,k.Z)(e,null,[{key:"list",value:function(e){return A.Z.get(this.baseURL+"/list",{params:e})}},{key:"detail",value:function(e,t){return A.Z.get(this.baseURL+"/details/"+e,{params:t})}},{key:"save",value:function(e){return A.Z.post(this.baseURL+"/save",e)}},{key:"delete",value:function(e){return A.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();I.baseURL="account";var D=function(){var e=(0,a.useState)(!1),t=(0,x.Z)(e,2),n=t[0],i=t[1],o=(0,a.useState)([]),l=(0,x.Z)(o,2),s=l[0],c=l[1],m=(0,a.useState)({}),w=(0,x.Z)(m,2),k=w[0],A=w[1],D=(0,a.useState)(""),R=(0,x.Z)(D,2),P=R[0],L=R[1],Y=(0,a.useState)(""),N=(0,x.Z)(Y,2),F=N[0],_=N[1],M=(0,a.useState)(""),E=(0,x.Z)(M,2),O=E[0],z=E[1];(0,a.useEffect)((function(){i(!0),U(),I.list({isAll:1}).then((function(e){var t;c(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return{label:e.name,value:e._id}})))})).catch((function(e){if("object"===typeof e.message){var t=e.message[Object.keys(e.message)[0]];f.ZP.error(t)}else f.ZP.error(e.message)})).finally((function(){i(!1)}))}),[]);var U=function(){i(!0),T.balance(k).then((function(e){var t,n,a,i=0,o=0,r=0;e.data.map((function(e){"credit"===e.type?(i+=e.totalAmount,o+=e.comissionCharge):r+=e.totalAmount})),L(null===(t=r)||void 0===t?void 0:t.toFixed(2)),_(null===(n=i)||void 0===n?void 0:n.toFixed(2)),z(null===(a=o)||void 0===a?void 0:a.toFixed(2))})).finally((function(){i(!1)}))};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(p.Z,{spinning:n,indicator:(0,u.jsx)(C.Z,{style:{fontSize:24},spin:!0}),children:[(0,u.jsxs)(Z.Z,{gutter:[12,2],children:[(0,u.jsx)(j.Z,{xs:{span:24},sm:{span:4},children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(v.Z,{showSearch:!0,allowClear:!0,placeholder:"Select an Account",optionFilterProp:"children",value:k.accountId,onChange:function(e){A((0,h.Z)((0,h.Z)({},k),{},{accountId:e}))},filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},style:{width:"100%"},options:s})})}),(0,u.jsx)(j.Z,{xs:{span:24},sm:{span:4},children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(y.Z.RangePicker,{format:"DD MMM YYYY",onChange:function(e){A((0,h.Z)((0,h.Z)({},k),{},{startTime:null!==e&&void 0!==e&&e[0]?new Date(e[0]):null,endTime:null!==e&&void 0!==e&&e[1]?new Date(e[1]):null}))}})})}),(0,u.jsx)(j.Z,{xs:{span:24},sm:{span:3},children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",block:!0,onClick:function(){U()},children:"Search"})})})]}),(0,u.jsxs)(Z.Z,{gutter:[20,20],style:{marginTop:20},children:[(0,u.jsx)(j.Z,{xs:{span:24},lg:{span:8},children:(0,u.jsx)(r.Z,{children:(0,u.jsx)(b.Z,{title:(0,u.jsx)(S.Z.Title,{style:{color:"#7171eb"},children:"Total Amount Received"}),value:"\u20b9 ".concat(F)})})}),(0,u.jsx)(j.Z,{xs:{span:24},lg:{span:8},children:(0,u.jsx)(r.Z,{children:(0,u.jsx)(b.Z,{title:(0,u.jsx)(S.Z.Title,{style:{color:"#e65050"},children:"Total Amount Given"}),value:"\u20b9 ".concat(P),precision:2})})}),(0,u.jsx)(j.Z,{xs:{span:24},lg:{span:8},children:(0,u.jsx)(r.Z,{children:(0,u.jsx)(b.Z,{title:(0,u.jsx)(S.Z.Title,{style:{color:"green"},children:"Total Comission"}),value:"\u20b9  ".concat(O),precision:2})})})]})]})})},R=n(5820),P=n(4260),L=n(9389),Y=n(9998),N=n(2622),F=n(1752),_=n(4215),M=n(9286),E=n(2339),O=n(4099);function z(e){var t=e.qData,n=e.setQData;return(0,u.jsx)(u.Fragment,{children:t.total>0?(0,u.jsx)(O.Z,{total:t.total,showTotal:function(){var e=(t.page-1)*t.limit*1+1,n=t.page*t.limit;return(0,u.jsx)(E.Z,{children:"Showing "+e+" - "+n+" out of "+t.total})},pageSize:t.limit,current:t.page,onChange:function(e,a){t.limit!==a?n((0,h.Z)((0,h.Z)({},t),{},{page:1,limit:a})):n((0,h.Z)((0,h.Z)({},t),{},{page:e}))},showSizeChanger:!0}):null})}var U=n(2426),B=n.n(U);function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";e&&("success"===t&&f.ZP.success(e),"error"===t&&f.ZP.error(e),"warning"===t&&f.ZP.warning(e))}var q=n(8747),H=n(6610),G=n(7892),W=n.n(G);function J(e){var t=e.accountId,n=void 0===t?null:t,i=(0,a.useState)([]),o=(0,x.Z)(i,2),r=o[0],l=o[1],s=(0,a.useState)(!1),c=(0,x.Z)(s,2),m=c[0],f=c[1],p=(0,a.useState)([]),g=(0,x.Z)(p,2),v=g[0],y=g[1],b=(0,a.useState)([]),C=(0,x.Z)(b,2),w=C[0],k=C[1],A=(0,a.useState)(0),D=(0,x.Z)(A,2),L=D[0],Y=D[1],_=(0,a.useState)({page:1,limit:20,accountId:n}),M=(0,x.Z)(_,2),E=M[0],O=M[1],U=(0,a.useRef)(),q=[{title:"Company",dataIndex:"masterAccount",width:50,render:function(e){return"SP"===e?(0,u.jsx)("div",{style:{background:"blue",textAlign:"center",color:"white"},children:e}):"SL"===e?(0,u.jsx)("div",{style:{background:"Green",textAlign:"center",color:"white"},children:e}):"SLQR"===e?(0,u.jsx)("div",{style:{background:"orange",textAlign:"center",color:"white"},children:e}):"QS"===e?(0,u.jsx)("div",{style:{background:"pink",textAlign:"center",color:"white"},children:e}):"PAR"===e?(0,u.jsx)("div",{style:{background:"yellow",textAlign:"center",color:"white"},children:e}):void 0}},{title:"Date",dataIndex:"date",width:50,render:function(e){return B()(e).format("DD MMM YYYY")}},{title:"Time",dataIndex:"createdAt",width:60,render:function(e){return B()(e).format("HH:mm A")}},{title:"Name",dataIndex:"accountDetail",width:100,render:function(e){return null===e||void 0===e?void 0:e.name}},{title:"Amount",dataIndex:"amount",width:80,render:function(e,t){return"credit"===t.transactionType?(0,u.jsxs)("div",{style:{background:"green",fontSize:"x-large",color:"white",textAlign:"center"},children:["  "," \u20b9".concat(t.amount)]}):(0,u.jsx)("div",{style:{background:"red",fontSize:"x-large",color:"white",textAlign:"center"},children:" \u20b9".concat(t.amount)})}},{title:"Comission",width:80,render:function(e,t){return"credit"===t.transactionType?t.amount*t.comissionPercentage/100:"---"}},{title:"Net Amount",width:80,render:function(e,t){return"credit"===t.transactionType?t.amount-t.amount*t.comissionPercentage/100:"---"}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(R.Z,{title:"Are you sure to delete this Account data?",onConfirm:function(){W(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(N.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(F.Z,{}),onClick:function(){U.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function G(){f(!0),$(),T.list(E).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,h.Z)((0,h.Z)({},e),{},{key:e._id})}))),O((0,h.Z)((0,h.Z)({},E),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){f(!1)}))}var W=function(e){T.delete(e).then((function(e){Q(e.message),G(),y([])})).catch((function(e){Q(e.message,"error")}))},J=q.map((function(e){return(0,h.Z)((0,h.Z)({},e),{},{ellipsis:!1})}));J[0].fixed=!0,J[J.length-1].fixed="right";var X={bordered:!0,loading:m,size:"small",title:function(){return(0,u.jsx)(K,{addNewModalRef:U,selected:v,deleteData:W,qData:E,setQData:O,list:G,accounts:w,accountId:n})},showHeader:!0,footer:function(){return(0,u.jsx)(z,{qData:E,setQData:O})},rowSelection:{onChange:function(e){y(e)}},tableLayout:void 0};(0,a.useEffect)((function(){G(),$()}),[E.page,E.limit]),(0,a.useEffect)((function(){I.list({isAll:1}).then((function(e){k(e.data)})).catch((function(e){"object"===typeof e.message?Q(e.message[Object.keys(e.message)[0]],"error"):Q(e.message,"error")}))}),[]);var $=function(){T.balance().then((function(e){var t,n,a=0,i=0,o=0;null===(t=e.data)||void 0===t||t.map((function(e){"credit"===e.type?(a+=e.totalAmount,i+=e.comissionCharge):o+=e.totalAmount})),Y(null===(n=a-i-o)||void 0===n?void 0:n.toFixed(2))}))};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Z.Z,{children:(0,u.jsx)(j.Z,{xs:{span:4},sm:{span:12},lg:{span:4},children:(0,u.jsx)(d.Z,{onClick:function(){return function(e){var t=[{title:"Company",dataIndex:"company"},{title:"Date",dataIndex:"date"},{title:"Time",dataIndex:"time"},{title:"Name",dataIndex:"name"},{title:"Amount",dataIndex:"amount"},{title:"Comission",dataIndex:"comission"},{title:"Net Amount",dataIndex:"netProfit"}];(new H.i).addSheet("test").addColumns(t).addDataSource(e.map((function(e){return(0,h.Z)((0,h.Z)({},e),{},{amount:"credit"===e.transactionType?"+".concat(e.amount):"(-)".concat(e.amount),name:e.accountDetail.name,company:"credit"===e.transactionType?e.masterAccount:"---",date:B()(e.date).format("DD MMM YYYY"),time:B()(e.createdAt).format("HH:mm A"),comission:"credit"===e.transactionType?e.amount*e.comissionPercentage/100:"---",netProfit:"credit"===e.transactionType?e.amount-e.amount*e.comissionPercentage/100:"--"})})),{str2Percent:!0}).saveAs("Excel.xlsx")}(r)},children:"Download in Excel"})})}),(0,u.jsxs)(S.Z.Title,{level:5,style:{margin:0},children:[(0,u.jsx)("span",{children:"List of All Transactions"}),(0,u.jsxs)("span",{style:{color:"red",float:"right"},children:["Available Balance \u20a8 ",L]})]}),(0,u.jsx)(P.Z,(0,h.Z)((0,h.Z)({},X),{},{pagination:{position:["none"],pageSize:E.limit},columns:J,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 100px)"}})),(0,u.jsx)(V,{ref:U,list:G,accounts:w,balance:L,accountId:n})]})}function K(e){var t=e.addNewModalRef,n=e.selected,i=e.deleteData,o=e.accountId,r=e.qData,l=e.setQData,s=e.list,c=e.accounts,m=(0,a.useState)([]),f=(0,x.Z)(m,2),p=f[0],b=f[1];return(0,a.useEffect)((function(){var e=null===c||void 0===c?void 0:c.map((function(e){return{label:e.name,value:e._id}}));b(e)}),[c]),(0,u.jsx)(g.Z,{onSubmitCapture:s,className:"search-form",children:(0,u.jsxs)(Z.Z,{gutter:[12,2],children:[o?null:(0,u.jsx)(j.Z,{xs:{span:24},sm:{span:12},lg:{span:4},children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(v.Z,{showSearch:!0,allowClear:!0,placeholder:"Select an Account",optionFilterProp:"children",onChange:function(e){return t=e,r[n="accountId"]=t,void(void 0===t&&(r[n]="",s()));var t,n},filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:p})})}),(0,u.jsx)(j.Z,{xs:{span:24},sm:{span:12},lg:{span:4},children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(y.Z.RangePicker,{format:"DD MMM YYYY",onChange:function(e){l((0,h.Z)((0,h.Z)({},r),{},{startTime:null!==e&&void 0!==e&&e[0]?new Date(e[0]):null,endTime:null!==e&&void 0!==e&&e[1]?new Date(e[1]):null}))}})})}),(0,u.jsx)(j.Z,{xs:{span:24},sm:{span:12},lg:{span:4},children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsxs)(v.Z,{placeholder:"Received or Given",value:r.transactionType,onChange:function(e){l((0,h.Z)((0,h.Z)({},r),{},{transactionType:e}))},allowClear:!0,children:[(0,u.jsx)(v.Z.Option,{value:"credit",children:"Received"}),(0,u.jsx)(v.Z.Option,{value:"debit",children:"Given"})]})})}),(0,u.jsx)(j.Z,{xs:{span:24},sm:{span:12},lg:{span:4},children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsxs)(v.Z,{placeholder:"Search Company",value:r.masterAccount,onChange:function(e){l((0,h.Z)((0,h.Z)({},r),{},{masterAccount:e}))},allowClear:!0,children:[(0,u.jsx)(v.Z.Option,{value:"SP",children:"S.P"}),(0,u.jsx)(v.Z.Option,{value:"SL",children:"S.L"}),(0,u.jsx)(v.Z.Option,{value:"SLQR",children:"SL(QR)"}),(0,u.jsx)(v.Z.Option,{value:"QS",children:"Q.S"}),(0,u.jsx)(v.Z.Option,{value:"PAR",children:"PAR"})]})})}),(0,u.jsx)(j.Z,{xs:{span:24},sm:{span:3},children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",block:!0,htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(j.Z,{xs:{span:24},sm:{span:12},children:[(0,u.jsxs)(g.Z.Item,{style:{marginBottom:0,float:"right"},children:[(0,u.jsx)(d.Z,{type:"primary",style:{marginRight:8},icon:(0,u.jsx)(M.Z,{}),onClick:function(){t.current.openForm({transactionType:"credit"})},children:" Receiving"}),(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(q.Z,{}),onClick:function(){t.current.openForm({transactionType:"debit"})},children:"Giveing"})]}),n.length?(0,u.jsx)(R.Z,{title:"Are you sure to delete these selected Data?",onConfirm:function(){i(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(N.Z,{}),children:"Delete Selected"})}):null]})]})})}var V=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.accounts,o=e.balance,r=e.accountId,l=void 0===r?null:r,s=(0,a.useState)(!1),c=(0,x.Z)(s,2),m=c[0],f=c[1],b=(0,a.useState)({aspect:1}),S=(0,x.Z)(b,2),w=S[0],k=S[1],A=(0,a.useState)(!1),I=(0,x.Z)(A,2),D=I[0],R=I[1],P=function(e){Object.entries(e).forEach((function(e){for(var t=w,n=e[0],a=e[1],i=n.split("."),o=0;o<i.length;o++)o+1===i.length?t[i[o]]=a:("undefined"===typeof t[i[o]]&&(1*parseInt(i[o+1])>=0?t[i[o]]=[]:t[i[o]]={}),t=t[i[o]])})),k((0,h.Z)({},w))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){f(!0),console.log("dt",e),console.log({accountId:l}),k(e._id?{_id:e._id}:{transactionType:e.transactionType,accountId:l,date:new Date})}}})),(0,a.useEffect)((function(){console.log(11,w)}),[w]);var N=function(){o<1*w.amount&&"debit"===w.transactionType?Q("Amount can not be greater than available balance","error"):(R(!0),T.save(w).then((function(e){Q(e.message),P((0,h.Z)({},e.data)),n(),f(!1)})).catch((function(e){"object"===typeof e.message?Q(e.message[Object.keys(e.message)[0]],"error"):Q(e.message,"error")})).finally((function(){R(!1)})))};(0,a.useEffect)((function(){w._id&&(R(!0),T.detail(w._id).then((function(e){k(e.data||{})})).catch((function(e){Q(e.message,"error")})).finally((function(){R(!1)})))}),[w._id]),(0,a.useEffect)((function(){m||k({_id:null})}),[m]);var F=(0,a.useState)([]),_=(0,x.Z)(F,2),M=_[0],E=_[1];return(0,a.useEffect)((function(){var e=null===i||void 0===i?void 0:i.map((function(e){return{label:e.name,value:e._id}}));E(e)}),[i]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(Y.Z,{title:(w._id?"Edit":"Add")+" Transaction Data",style:{top:20},open:m,okText:"Save",onOk:N,okButtonProps:{disabled:D},onCancel:function(){f(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body-overflow",footer:[(0,u.jsx)(d.Z,{onClick:function(){f(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:N,children:"Save"},"save")],children:(0,u.jsx)(p.Z,{spinning:D,indicator:(0,u.jsx)(C.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsxs)(Z.Z,{gutter:[0,2],children:[(0,u.jsxs)(j.Z,{span:24,children:[(0,u.jsx)(g.Z.Item,{label:"Account Name",required:!0,children:(0,u.jsx)(v.Z,{disabled:l,showSearch:!0,allowClear:!0,placeholder:"Select an Account",optionFilterProp:"children",value:w.accountId,onChange:function(e){P({accountId:e})},filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:M})}),"debit"===w.transactionType?(0,u.jsx)(u.Fragment,{}):(0,u.jsx)(g.Z.Item,{label:"Company Name",required:!0,children:(0,u.jsx)(v.Z,{showSearch:!0,allowClear:!0,placeholder:"Select Company",optionFilterProp:"children",onChange:function(e){P({masterAccount:e})},filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:[{label:"S.P",value:"SP"},{label:"SL",value:"SL"},{label:"S.L(PR)",value:"SLQR"},{label:"Q.S",value:"QS"},{label:"PAR",value:"PAR"}]})})]}),(0,u.jsx)(j.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Amount",required:!0,children:(0,u.jsx)(L.Z,{placeholder:"Enter Amount",max:o,type:"number",min:0,value:w.amount,onChange:function(e){return P({amount:e.target.value})}})})}),(0,u.jsx)(j.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Date",required:!0,children:(0,u.jsx)(y.Z,{format:"DD MMM YYYY",onChange:function(e){P({date:new Date(e)})},value:W()(B()(w.date).format("YYYY-MM-DD"),"YYYY-MM-DD"),className:"w-100"})})})]})})})})})}));function X(e){var t=e.type,n=(0,a.useState)([]),i=(0,x.Z)(n,2),o=i[0],r=i[1],l=(0,a.useState)(!1),s=(0,x.Z)(l,2),c=s[0],m=s[1],f=(0,a.useState)([]),p=(0,x.Z)(f,2),Z=p[0],j=p[1],g=(0,a.useState)({page:1,limit:20}),v=(0,x.Z)(g,2),y=v[0],b=v[1],C=(0,a.useRef)(),w=(0,a.useRef)(),k=[{title:"#",width:44,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Name",dataIndex:"name"},{title:"Action",dataIndex:"_id",width:110,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(R.Z,{title:"Are you sure to delete this Account data?",onConfirm:function(){T(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(N.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(F.Z,{}),onClick:function(){C.current.openForm(t._id)},style:{marginRight:"4px"}}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(_.Z,{}),onClick:function(){w.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function A(){m(!0),I.list(y).then((function(e){var t;r(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,h.Z)((0,h.Z)({},e),{},{key:e._id})}))),b((0,h.Z)((0,h.Z)({},y),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){m(!1)}))}var T=function(e){I.delete(e).then((function(e){Q(e.message),A(),j([])})).catch((function(e){Q(e.message,"error")}))},D=k.map((function(e){return(0,h.Z)((0,h.Z)({},e),{},{ellipsis:!1})}));D[0].fixed=!0,D[D.length-1].fixed="right";var L={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)($,{addNewModalRef:C,selected:Z,deleteData:T,qData:y,setQData:b,list:A})},showHeader:!0,footer:function(){return(0,u.jsx)(z,{qData:y,setQData:b})},rowSelection:{onChange:function(e){j(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){A()}),[y.page,y.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(S.Z.Title,{level:5,style:{margin:0},children:"List of  Accounts"}),(0,u.jsx)(P.Z,(0,h.Z)((0,h.Z)({},L),{},{pagination:{position:["none"],pageSize:y.limit},columns:D,dataSource:o.length?o:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(ee,{ref:C,list:A,type:t}),(0,u.jsx)(te,{ref:w})]})}function $(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,o=e.setQData,r=e.list;return(0,u.jsx)(g.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(Z.Z,{gutter:[12,2],children:[(0,u.jsx)(j.Z,{xs:{span:24},sm:{span:4},children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(L.Z,{placeholder:"Search by name",onChange:function(e){o((0,h.Z)((0,h.Z)({},i),{},{key:e.target.value}))}})})}),(0,u.jsx)(j.Z,{xs:{span:24},sm:{span:3},children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",block:!0,htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(j.Z,{xs:{span:24},sm:{span:2},children:[(0,u.jsx)(g.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(M.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(R.Z,{title:"Are you sure to delete these selected Data?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(N.Z,{}),children:"Delete Selected"})}):null]})]})})}var ee=(0,a.forwardRef)((function(e,t){var n=e.list,i=(0,a.useState)(!1),o=(0,x.Z)(i,2),r=o[0],l=o[1],s=(0,a.useState)({aspect:1}),c=(0,x.Z)(s,2),m=c[0],f=c[1],v=(0,a.useState)(!1),y=(0,x.Z)(v,2),b=y[0],S=y[1],w=function(e){f((0,h.Z)((0,h.Z)({},m),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),f(e?{_id:e}:{status:!0})}}}));var k=function(){S(!0),I.save(m).then((function(e){Q(e.message),w((0,h.Z)({},e.data)),n()})).catch((function(e){"object"===typeof e.message?Q(e.message[Object.keys(e.message)[0]],"error"):Q(e.message,"error")})).finally((function(){S(!1)}))};return(0,a.useEffect)((function(){m._id&&(S(!0),I.detail(m._id).then((function(e){f(e.data||{})})).catch((function(e){Q(e.message,"error")})).finally((function(){S(!1)})))}),[m._id]),(0,a.useEffect)((function(){r||f({_id:null})}),[r]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(Y.Z,{title:(m._id?"Edit":"Add")+" Account Data",style:{top:20},open:r,okText:"Save",onOk:k,okButtonProps:{disabled:b},onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",footer:[(0,u.jsx)(d.Z,{onClick:function(){l(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:k,children:"Save"},"save")],children:(0,u.jsx)(p.Z,{spinning:b,indicator:(0,u.jsx)(C.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsx)(Z.Z,{gutter:[0,2],children:(0,u.jsx)(j.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Name",required:!0,children:(0,u.jsx)(L.Z,{placeholder:"Enter Name",value:m.name,onChange:function(e){return w({name:e.target.value})}})})})})})})})})})),te=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),o=i[0],r=i[1],l=(0,a.useState)({aspect:1}),s=(0,x.Z)(l,2),c=s[0],d=s[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){r(!0),d(e)}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(Y.Z,{style:{top:20},open:o,okText:"Save",onCancel:function(){r(!1)},maskClosable:!1,width:1600,destroyOnClose:!0,className:"app-modal-body-overflow",footer:null,children:(0,u.jsx)(J,{accountId:c})})})})),ne=n(4942),ae=n(7128),ie=n(8748);function oe(){var e=(0,a.useState)({}),t=(0,x.Z)(e,2),n=t[0],i=t[1],o=(0,a.useState)([]),r=(0,x.Z)(o,2),l=r[0],s=r[1],c=(0,a.useState)(!1),d=(0,x.Z)(c,2),m=d[0],f=d[1],v=(0,a.useState)(!1),y=(0,x.Z)(v,2),b=y[0],w=(y[1],function(e,t){i((0,h.Z)((0,h.Z)({},n),{},(0,ne.Z)({},t,e)))});return(0,a.useEffect)((function(){f(!0),ie.Z.profile().then((function(e){var t,n;i(e.data.result||{}),null!==(t=e.data.result)&&void 0!==t&&t.avatar&&s([null===(n=e.data.result)||void 0===n?void 0:n.avatar])})).catch((function(e){Q(e.message,"error")})).finally((function(){f(!1)}))}),[]),(0,a.useEffect)((function(){b&&(f(!0),ie.Z.saveProfile(n).then((function(e){Q(e.message)})).catch((function(e){Q(e.message,"error")})).finally((function(){f(!1)})))}),[n]),(0,a.useEffect)((function(){w(null===l||void 0===l?void 0:l[0],"avatar")}),[l]),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(p.Z,{spinning:m,indicator:(0,u.jsx)(C.Z,{style:{fontSize:24},spin:!0}),children:[(0,u.jsx)(ae.Z,{}),(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsxs)(Z.Z,{gutter:[12,2],children:[(0,u.jsx)(j.Z,{span:16,children:(0,u.jsxs)(Z.Z,{gutter:[12,10],children:[(0,u.jsx)(j.Z,{span:12,children:(0,u.jsxs)(g.Z.Item,{label:(0,u.jsx)(S.Z.Text,{strong:!0,type:"secondary",children:"Name"}),children:[(0,u.jsx)(S.Z.Title,{editable:{editing:b,triggerType:b?"icon":"text",onChange:function(e){w(e,"name")}},level:5,children:n.name}),(0,u.jsx)(ae.Z,{style:{margin:0}})]})}),(0,u.jsx)(j.Z,{span:12,children:(0,u.jsxs)(g.Z.Item,{label:(0,u.jsx)(S.Z.Text,{strong:!0,type:"secondary",children:"User Name"}),children:[(0,u.jsx)(S.Z.Title,{editable:{editing:b,triggerType:b?"icon":"text",onChange:function(e){w(e,"userName")}},level:5,children:n.userName}),(0,u.jsx)(ae.Z,{style:{margin:0}})]})}),(0,u.jsx)(j.Z,{span:12,children:(0,u.jsxs)(g.Z.Item,{label:(0,u.jsx)(S.Z.Text,{strong:!0,type:"secondary",children:"Email"}),children:[(0,u.jsx)(S.Z.Title,{editable:{editing:b,triggerType:b?"icon":"text",onChange:function(e){w(e,"email")}},level:5,children:n.email}),(0,u.jsx)(ae.Z,{style:{margin:0}})]})}),(0,u.jsx)(j.Z,{span:12,children:(0,u.jsxs)(g.Z.Item,{label:(0,u.jsx)(S.Z.Text,{strong:!0,type:"secondary",children:"Phone Number"}),children:[(0,u.jsx)(S.Z.Title,{editable:{editing:b,triggerType:b?"icon":"text",onChange:function(e){w(e,"phone")}},level:5,children:n.phone}),(0,u.jsx)(ae.Z,{style:{margin:0}})]})})]})}),(0,u.jsx)(j.Z,{span:8})]})})]})})}function re(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(i.Z,{style:{minHeight:"100vh"},children:(0,u.jsxs)(i.Z,{className:"site-layout",children:[(0,u.jsx)(i.Z.Header,{style:{padding:0,height:"auto"},children:(0,u.jsx)(o.Z,{theme:"dark",mode:"horizontal",items:[{label:(0,u.jsx)(l.rU,{to:"/dashboard",children:"Dashboard"}),key:"dashboard"},{label:(0,u.jsx)(l.rU,{to:"/accounts",children:"Account"}),key:"accounts"},{label:(0,u.jsx)(l.rU,{to:"/transaction",children:"Transactions"}),key:"transaction"},{label:(0,u.jsx)(l.rU,{to:"/profile",children:"Profile"}),key:"profile"}]})}),(0,u.jsx)(i.Z.Content,{children:(0,u.jsx)(r.Z,{style:{borderRadius:"none"},children:(0,u.jsxs)(s.Z5,{children:[(0,u.jsx)(s.AW,{path:"dashboard/",element:(0,u.jsx)(D,{})}),(0,u.jsx)(s.AW,{path:"accounts/",element:(0,u.jsx)(X,{})}),(0,u.jsx)(s.AW,{path:"transaction/",element:(0,u.jsx)(J,{})}),(0,u.jsx)(s.AW,{path:"profile/",element:(0,u.jsx)(oe,{})}),(0,u.jsx)(s.AW,{path:"*",element:(0,u.jsx)(m,{})})]})})})]})})})}}}]);
//# sourceMappingURL=131.62f5454d.chunk.js.map