"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[78],{8078:function(e,t,n){n.r(t),n.d(t,{default:function(){return de}});var a=n(2791),i=n(586),l=n(3388),r=n(4056),o=n(1087),s=n(7689),c=n(8935),d=n(7309),u=n(184);function h(){return(0,u.jsx)(c.ZP,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:(0,u.jsx)(o.rU,{to:"/",children:(0,u.jsx)(d.Z,{type:"primary",children:"Back Home"})})})}var m=n(4942),x=n(1413),Z=n(9439),f=n(7027),p=n(43),j=n(6106),g=n(914),v=n(7615),y=n(458),b=n(1717),S=n(1429),k=n(8302),C=n(7106),A=n(5671),w=n(3144),T=n(7205),D=function(){function e(){(0,A.Z)(this,e)}return(0,w.Z)(e,null,[{key:"list",value:function(e){return T.Z.get(this.baseURL+"/list",{params:e})}},{key:"detail",value:function(e,t){return T.Z.get(this.baseURL+"/details/"+e,{params:t})}},{key:"save",value:function(e){return T.Z.post(this.baseURL+"/save",e)}},{key:"delete",value:function(e){return T.Z.post(this.baseURL+"/delete",{ids:e})}},{key:"balance",value:function(e){return T.Z.get(this.baseURL+"/get-balence",{params:e})}},{key:"updateStatus",value:function(e){return T.Z.post(this.baseURL+"/update-status",e)}}]),e}();D.baseURL="transation";var I=function(){function e(){(0,A.Z)(this,e)}return(0,w.Z)(e,null,[{key:"list",value:function(e){return T.Z.get(this.baseURL+"/list",{params:e})}},{key:"detail",value:function(e,t){return T.Z.get(this.baseURL+"/details/"+e,{params:t})}},{key:"save",value:function(e){return T.Z.post(this.baseURL+"/save",e)}},{key:"delete",value:function(e){return T.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();I.baseURL="account";var R=function(){var e,t=(0,a.useState)(!1),n=(0,Z.Z)(t,2),i=n[0],l=n[1],o=(0,a.useState)([]),s=(0,Z.Z)(o,2),c=s[0],h=s[1],A=(0,a.useState)({}),w=(0,Z.Z)(A,2),T=w[0],R=w[1],L=(0,a.useState)(""),P=(0,Z.Z)(L,2),Y=P[0],F=P[1],N=(0,a.useState)(""),M=(0,Z.Z)(N,2),z=M[0],_=M[1],Q=(0,a.useState)(""),U=(0,Z.Z)(Q,2),O=U[0],q=U[1],B=(0,a.useState)(0),E=(0,Z.Z)(B,2),H=E[0],W=E[1],G=(0,a.useState)(""),V=(0,Z.Z)(G,2),J=V[0],K=V[1],X=(0,a.useState)(""),$=(0,Z.Z)(X,2),ee=$[0],te=$[1],ne=(0,a.useState)(""),ae=(0,Z.Z)(ne,2),ie=ae[0],le=ae[1],re=(0,a.useState)(""),oe=(0,Z.Z)(re,2),se=oe[0],ce=oe[1];(0,a.useEffect)((function(){l(!0),ue(),de(),I.list({isAll:1}).then((function(e){var t;h(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return{label:e.name,value:e._id}})))})).catch((function(e){if("object"===typeof e.message){var t=e.message[Object.keys(e.message)[0]];f.ZP.error(t)}else f.ZP.error(e.message)})).finally((function(){l(!1)}))}),[]);var de=function(){l(!0),D.balance(T).then((function(e){var t,n,a,i=0,l=0,r=0;e.data.map((function(e){"credit"===e.type?(i+=e.totalAmount,l+=e.comissionCharge):r+=e.totalAmount})),F(null===(t=r)||void 0===t?void 0:t.toFixed(2)),_(null===(n=i)||void 0===n?void 0:n.toFixed(2)),q(null===(a=l)||void 0===a?void 0:a.toFixed(2))})).finally((function(){l(!1)}))},ue=function(){de(),D.balance((0,x.Z)((0,x.Z)({},T),{},{masterAccount:"SP"})).then((function(e){var t,n;W((null===(t=e.data)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.totalAmount)||0)})),D.balance((0,x.Z)((0,x.Z)({},T),{},{masterAccount:"SL"})).then((function(e){var t,n;K((null===(t=e.data)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.totalAmount)||0)})),D.balance((0,x.Z)((0,x.Z)({},T),{},{masterAccount:"SLQR"})).then((function(e){var t,n;te((null===(t=e.data)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.totalAmount)||0)})),D.balance((0,x.Z)((0,x.Z)({},T),{},{masterAccount:"QS"})).then((function(e){var t,n;le((null===(t=e.data)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.totalAmount)||0)})),D.balance((0,x.Z)((0,x.Z)({},T),{},{masterAccount:"PAR"})).then((function(e){var t,n;ce((null===(t=e.data)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.totalAmount)||0)}))};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(p.Z,{spinning:i,indicator:(0,u.jsx)(C.Z,{style:{fontSize:24},spin:!0}),children:[(0,u.jsxs)(j.Z,{gutter:[12,2],children:[(0,u.jsx)(g.Z,{xs:{span:24},sm:{span:4},children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(y.Z,{showSearch:!0,allowClear:!0,placeholder:"Select an Account",optionFilterProp:"children",value:T.accountId,onChange:function(e){R((0,x.Z)((0,x.Z)({},T),{},{accountId:e}))},filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},style:{width:"100%"},options:c})})}),(0,u.jsx)(g.Z,{xs:{span:24},sm:{span:4},children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(b.Z.RangePicker,{format:"DD MMM YYYY",onChange:function(e){R((0,x.Z)((0,x.Z)({},T),{},{startTime:null!==e&&void 0!==e&&e[0]?new Date(e[0]):null,endTime:null!==e&&void 0!==e&&e[1]?new Date(e[1]):null}))}})})}),(0,u.jsx)(g.Z,{xs:{span:24},sm:{span:3},children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",block:!0,onClick:function(){ue()},children:"Search"})})})]}),(0,u.jsxs)(j.Z,{gutter:[20,20],style:{marginTop:"20px"},children:[(0,u.jsx)(g.Z,{xs:{span:24},lg:{span:6},children:(0,u.jsx)(r.Z,{hoverable:!0,children:(0,u.jsx)(S.Z,{title:(0,u.jsx)(k.Z.Title,{style:{color:"#7171eb",fontSize:"20px"},children:"Total Amount Received "}),value:"\u20b9 ".concat(z)})})}),(0,u.jsx)(g.Z,{xs:{span:24},lg:{span:6},children:(0,u.jsx)(r.Z,{hoverable:!0,children:(0,u.jsx)(S.Z,{title:(0,u.jsx)(k.Z.Title,{style:{color:"#e65050",fontSize:"20px"},children:"Total Amount Given"}),value:"\u20b9 ".concat(Y)})})}),(0,u.jsx)(g.Z,{xs:{span:24},lg:{span:6},children:(0,u.jsx)(r.Z,{hoverable:!0,children:(0,u.jsx)(S.Z,{title:(0,u.jsx)(k.Z.Title,{style:{color:"green",fontSize:"20px"},children:"Total Comission"}),value:"\u20b9  ".concat(O)})})}),(0,u.jsx)(g.Z,{xs:{span:24},lg:{span:6},children:(0,u.jsx)(r.Z,{hoverable:!0,children:(0,u.jsx)(S.Z,{title:(0,u.jsx)(k.Z.Title,{style:{color:"#7171eb",fontSize:"20px"},children:"Total Balance Available "}),value:"\u20b9 ".concat(z-Y-O)})})})]}),(0,u.jsxs)(j.Z,{gutter:[20,20],style:{marginTop:"20px"},children:[(0,u.jsx)(g.Z,{xs:{span:24},lg:{span:12},children:(0,u.jsx)(r.Z,{hoverable:!0,style:{border:"solid 15px #8686e6"},children:(0,u.jsx)(S.Z,{title:(0,u.jsx)(k.Z.Title,{style:{color:"#7171eb",fontSize:"18px"},children:"Total Amount Received in S.P"}),value:"\u20b9 ".concat(H)})})}),(0,u.jsx)(g.Z,{xs:{span:24},lg:{span:12},children:(0,u.jsx)(r.Z,{hoverable:!0,style:{border:"solid 15px #7fbe7f"},children:(0,u.jsx)(S.Z,{title:(0,u.jsx)(k.Z.Title,{style:{color:"#7171eb",fontSize:"18px"},children:"Total Amount Received in S.L"}),value:"\u20b9 ".concat(J)})})})]}),(0,u.jsxs)(j.Z,{gutter:[20,20],style:{marginTop:"20px"},children:[(0,u.jsx)(g.Z,{xs:{span:24},lg:{span:12},children:(0,u.jsx)(r.Z,{hoverable:!0,style:{border:"solid 15px #deae56"},children:(0,u.jsx)(S.Z,{title:(0,u.jsx)(k.Z.Title,{style:(e={color:"#7171eb"},(0,m.Z)(e,"color","orange"),(0,m.Z)(e,"fontSize","18px"),e),children:"Total Amount Received in S.L(PR)"}),value:"\u20b9 ".concat(ee)})})}),(0,u.jsx)(g.Z,{xs:{span:24},lg:{span:12},children:(0,u.jsx)(r.Z,{hoverable:!0,style:{border:"solid 15px pink"},children:(0,u.jsx)(S.Z,{title:(0,u.jsx)(k.Z.Title,{style:{color:"#7171eb",fontSize:"18px"},children:"Total Amount Received in Q.S"}),value:"\u20b9 ".concat(ie)})})})]}),(0,u.jsx)(j.Z,{gutter:[20,20],style:{marginTop:"20px"},children:(0,u.jsx)(g.Z,{xs:{span:24,offset:0},lg:{span:12,offset:6},children:(0,u.jsx)(r.Z,{hoverable:!0,style:{border:"solid 15px #dcdc81"},children:(0,u.jsx)(S.Z,{title:(0,u.jsx)(k.Z.Title,{style:{color:"#7171eb",fontSize:"18px"},children:"Total Amount Received in P.A.R"}),value:"\u20b9 ".concat(se)})})})})]})})},L=n(5820),P=n(4260),Y=n(9389),F=n(9998),N=n(2622),M=n(1752),z=n(4215),_=n(9286),Q=n(2339),U=n(4099);function O(e){var t=e.qData,n=e.setQData;return(0,u.jsx)(u.Fragment,{children:t.total>0?(0,u.jsx)(U.Z,{total:t.total,showTotal:function(){var e=(t.page-1)*t.limit*1+1,n=t.page*t.limit;return(0,u.jsx)(Q.Z,{children:"Showing "+e+" - "+n+" out of "+t.total})},pageSize:t.limit,current:t.page,onChange:function(e,a){t.limit!==a?n((0,x.Z)((0,x.Z)({},t),{},{page:1,limit:a})):n((0,x.Z)((0,x.Z)({},t),{},{page:e}))},showSizeChanger:!0}):null})}var q=n(2426),B=n.n(q);function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";e&&("success"===t&&f.ZP.success(e),"error"===t&&f.ZP.error(e),"warning"===t&&f.ZP.warning(e))}var H=n(1306),W=n(8747),G=n(6610),V=n(7892),J=n.n(V);function K(e){var t=e.accountId,n=void 0===t?null:t,i=(0,a.useState)([]),l=(0,Z.Z)(i,2),r=l[0],o=l[1],s=(0,a.useState)(!1),c=(0,Z.Z)(s,2),h=c[0],m=c[1],p=(0,a.useState)([]),v=(0,Z.Z)(p,2),y=v[0],b=v[1],S=(0,a.useState)([]),C=(0,Z.Z)(S,2),A=C[0],w=C[1],T=(0,a.useState)(0),R=(0,Z.Z)(T,2),Y=R[0],F=R[1],z=(0,a.useState)({page:1,limit:20,accountId:n,startTime1:new Date,endTime1:new Date}),_=(0,Z.Z)(z,2),Q=_[0],U=_[1],q=(0,a.useRef)(),W=(0,a.useState)(0),V=(0,Z.Z)(W,2),J=(V[0],V[1],[{title:"Company",dataIndex:"masterAccount",width:50,render:function(e){return"SP"===e?(0,u.jsx)("div",{style:{background:"blue",textAlign:"center",color:"black"},children:e}):"SL"===e?(0,u.jsx)("div",{style:{background:"Green",textAlign:"center",color:"black"},children:e}):"SLQR"===e?(0,u.jsx)("div",{style:{background:"orange",textAlign:"center",color:"black"},children:"SL(PR)"}):"QS"===e?(0,u.jsx)("div",{style:{background:"pink",textAlign:"center",color:"black"},children:e}):"PAR"===e?(0,u.jsx)("div",{style:{background:"yellow",textAlign:"center",color:"black"},children:e}):void 0}},{title:"Date",dataIndex:"date",width:100,render:function(e){return B()(e).format("DD MMM YYYY")}},{title:"Time",dataIndex:"createdAt",width:60,render:function(e){return B()(e).format("HH:mm A")}},{title:"Name",dataIndex:"accountDetail",width:100,render:function(e){return null===e||void 0===e?void 0:e.name}},{title:"Amount",dataIndex:"amount",width:80,render:function(e,t){return"credit"===t.transactionType?(0,u.jsxs)("div",{style:{background:"green",fontSize:"x-large",color:"white",textAlign:"center"},children:["  "," \u20b9".concat(t.amount)]}):(0,u.jsx)("div",{style:{background:"red",fontSize:"x-large",color:"white",textAlign:"center"},children:" \u20b9".concat(t.amount)})}},{title:"Comission",width:80,render:function(e,t){return"credit"===t.transactionType?(0,u.jsxs)("div",{style:{fontWeight:"bold"},children:["\u20b9",t.amount*t.comissionPercentage/100," "]}):"---"}},{title:"Net Amount",width:80,render:function(e,t){return"credit"===t.transactionType?(0,u.jsxs)("div",{style:{fontWeight:"bold"},children:["\u20b9",t.amount-t.amount*t.comissionPercentage/100]}):"---"}},{title:"Remark",width:100,dataIndex:"remark"},{title:"Verify",dataIndex:"_id",width:100,render:function(e,t){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(H.Z,{checkedChildren:"Verified",loading:t.ajxRequesting,unCheckedChildren:"Unverified",checked:t.status,onChange:function(e){o(r.map((function(e){return e._id===t._id?(0,x.Z)((0,x.Z)({},e),{},{ajxRequesting:!0}):e}))),D.updateStatus({_id:t._id,status:e}).then((function(e){o(r.map((function(n){var a;return n._id===t._id?(0,x.Z)((0,x.Z)({},n),{},{status:null===(a=e.data)||void 0===a?void 0:a.status,ajxRequesting:!1}):n}))),ae(),f.ZP.success(e.message)})).catch((function(e){f.ZP.error(e.message)}))}})})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(L.Z,{title:"Are you sure to delete this Account data?",onConfirm:function(){ee(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(N.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(M.Z,{}),onClick:function(){q.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden})));function K(){m(!0),ae(),D.list(Q).then((function(e){var t;o(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),U((0,x.Z)((0,x.Z)({},Q),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){m(!1)}))}var ee=function(e){D.delete(e).then((function(e){E(e.message),K(),b([])})).catch((function(e){E(e.message,"error")}))},te=J.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));te[0].fixed=!0,te[te.length-1].fixed="right";var ne={bordered:!0,loading:h,size:"small",title:function(){return(0,u.jsx)(X,{addNewModalRef:q,selected:y,deleteData:ee,qData:Q,setQData:U,list:K,accounts:A,accountId:n})},showHeader:!0,footer:function(){return(0,u.jsx)(O,{qData:Q,setQData:U})},rowSelection:{onChange:function(e){b(e)}},tableLayout:void 0};(0,a.useEffect)((function(){K(),ae()}),[Q.page,Q.limit]),(0,a.useEffect)((function(){I.list({isAll:1}).then((function(e){w(e.data)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")}))}),[]);var ae=function(){D.balance().then((function(e){var t,n,a=0,i=0,l=0;null===(t=e.data)||void 0===t||t.map((function(e){"credit"===e.type?(a+=e.totalAmount,i+=e.comissionCharge):l+=e.totalAmount})),F(null===(n=a-i-l)||void 0===n?void 0:n.toFixed(2))}))};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z,{children:(0,u.jsx)(g.Z,{xs:{span:4},sm:{span:12},lg:{span:4},children:(0,u.jsx)(d.Z,{onClick:function(){return function(e){var t=[{title:"Company",dataIndex:"company"},{title:"Date",dataIndex:"date"},{title:"Time",dataIndex:"time"},{title:"Name",dataIndex:"name"},{title:"Amount",dataIndex:"amount"},{title:"Comission",dataIndex:"comission"},{title:"Net Amount",dataIndex:"netProfit"}];(new G.i).addSheet("test").addColumns(t).addDataSource(e.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{amount:"credit"===e.transactionType?"+".concat(e.amount):"(-)".concat(e.amount),name:e.accountDetail.name,company:"credit"===e.transactionType?e.masterAccount:"---",date:B()(e.date).format("DD MMM YYYY"),time:B()(e.createdAt).format("HH:mm A"),comission:"credit"===e.transactionType?e.amount*e.comissionPercentage/100:"---",netProfit:"credit"===e.transactionType?e.amount-e.amount*e.comissionPercentage/100:"--"})})),{str2Percent:!0}).saveAs("Excel.xlsx")}(r)},children:"Download in Excel"})})}),(0,u.jsxs)(k.Z.Title,{level:5,style:{margin:0},children:[(0,u.jsx)("span",{children:"List of All Transactions"}),(0,u.jsxs)("span",{style:{color:"red",float:"right"},children:["Available Balance \u20a8 ",Y]})]}),(0,u.jsx)(P.Z,(0,x.Z)((0,x.Z)({},ne),{},{pagination:{position:["none"],pageSize:Q.limit},columns:te,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 100px)"}})),(0,u.jsx)($,{ref:q,list:K,accounts:A,balance:Y,accountId:n})]})}function X(e){var t=e.addNewModalRef,n=e.selected,i=e.deleteData,l=e.accountId,r=e.qData,o=e.setQData,s=e.list,c=e.accounts,h=(0,a.useState)([]),m=(0,Z.Z)(h,2),f=m[0],p=m[1];return(0,a.useEffect)((function(){var e=null===c||void 0===c?void 0:c.map((function(e){return{label:e.name,value:e._id}}));p(e)}),[c]),(0,u.jsx)(v.Z,{onSubmitCapture:s,className:"search-form",children:(0,u.jsxs)(j.Z,{gutter:[12,2],children:[l?null:(0,u.jsx)(g.Z,{xs:{span:24},sm:{span:12},lg:{span:4},children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(y.Z,{showSearch:!0,allowClear:!0,placeholder:"Select an Account",optionFilterProp:"children",onChange:function(e){return t=e,r[n="accountId"]=t,void(void 0===t&&(r[n]="",s()));var t,n},filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:f})})}),(0,u.jsx)(g.Z,{xs:{span:24},sm:{span:12},lg:{span:4},children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(b.Z.RangePicker,{format:"DD MMM YYYY",onChange:function(e){o((0,x.Z)((0,x.Z)({},r),{},{startTime:null!==e&&void 0!==e&&e[0]?new Date(e[0]):null,endTime:null!==e&&void 0!==e&&e[1]?new Date(e[1]):null}))}})})}),(0,u.jsx)(g.Z,{xs:{span:24},sm:{span:12},lg:{span:4},children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsxs)(y.Z,{placeholder:"Received or Given",value:r.transactionType,onChange:function(e){o((0,x.Z)((0,x.Z)({},r),{},{transactionType:e}))},allowClear:!0,children:[(0,u.jsx)(y.Z.Option,{value:"credit",children:"Received"}),(0,u.jsx)(y.Z.Option,{value:"debit",children:"Given"})]})})}),(0,u.jsx)(g.Z,{xs:{span:24},sm:{span:12},lg:{span:4},children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsxs)(y.Z,{placeholder:"Search Company",value:r.masterAccount,onChange:function(e){o((0,x.Z)((0,x.Z)({},r),{},{masterAccount:e}))},allowClear:!0,children:[(0,u.jsx)(y.Z.Option,{value:"SP",children:"S.P"}),(0,u.jsx)(y.Z.Option,{value:"SL",children:"S.L"}),(0,u.jsx)(y.Z.Option,{value:"SLQR",children:"SL(QR)"}),(0,u.jsx)(y.Z.Option,{value:"QS",children:"Q.S"}),(0,u.jsx)(y.Z.Option,{value:"PAR",children:"PAR"})]})})}),(0,u.jsx)(g.Z,{children:(0,u.jsx)(v.Z.Item,{children:(0,u.jsx)(Y.Z,{placeholder:" Search by remark",value:r.remark,onChange:function(e){o((0,x.Z)((0,x.Z)({},r),{},{remark:e.target.value}))}})})}),(0,u.jsx)(g.Z,{xs:{span:24},sm:{span:3},children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",block:!0,htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(g.Z,{xs:{span:24},sm:{span:12},children:[(0,u.jsxs)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:[(0,u.jsx)(d.Z,{type:"primary",style:{marginRight:8},icon:(0,u.jsx)(_.Z,{}),onClick:function(){t.current.openForm({transactionType:"credit"})},children:" Receiving"}),(0,u.jsx)(d.Z,{type:"primary",style:{background:"red"},icon:(0,u.jsx)(W.Z,{}),onClick:function(){t.current.openForm({transactionType:"debit"})},children:"Giving"})]}),n.length?(0,u.jsx)(L.Z,{title:"Are you sure to delete these selected Data?",onConfirm:function(){i(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(N.Z,{}),children:"Delete Selected"})}):null]})]})})}var $=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.accounts,l=e.balance,r=e.accountId,o=void 0===r?null:r,s=(0,a.useState)(!1),c=(0,Z.Z)(s,2),h=c[0],m=c[1],f=(0,a.useState)({aspect:1}),S=(0,Z.Z)(f,2),k=S[0],A=S[1],w=(0,a.useState)(!1),T=(0,Z.Z)(w,2),I=T[0],R=T[1],L=function(e){Object.entries(e).forEach((function(e){for(var t=k,n=e[0],a=e[1],i=n.split("."),l=0;l<i.length;l++)l+1===i.length?t[i[l]]=a:("undefined"===typeof t[i[l]]&&(1*parseInt(i[l+1])>=0?t[i[l]]=[]:t[i[l]]={}),t=t[i[l]])})),A((0,x.Z)({},k))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){m(!0),A(e._id?{_id:e._id}:{transactionType:e.transactionType,accountId:o,date:new Date})}}}));var P=function(){l<1*k.amount&&"debit"===k.transactionType?E("Amount can not be greater than available balance","error"):(R(!0),D.save(k).then((function(e){E(e.message),L((0,x.Z)({},e.data)),n(),m(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){R(!1)})))};(0,a.useEffect)((function(){k._id&&(R(!0),D.detail(k._id).then((function(e){A(e.data||{})})).catch((function(e){E(e.message,"error")})).finally((function(){R(!1)})))}),[k._id]),(0,a.useEffect)((function(){h||A({_id:null})}),[h]);var N=(0,a.useState)([]),M=(0,Z.Z)(N,2),z=M[0],_=M[1];return(0,a.useEffect)((function(){var e=null===i||void 0===i?void 0:i.map((function(e){return{label:e.name,value:e._id}}));_(e)}),[i]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(F.Z,{title:(k._id?"Edit":"Add")+" Transaction Data",style:{top:20},open:h,okText:"Save",onOk:P,okButtonProps:{disabled:I},onCancel:function(){m(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body-overflow",footer:[(0,u.jsx)(d.Z,{onClick:function(){m(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:P,children:"Save"},"save")],children:(0,u.jsx)(p.Z,{spinning:I,indicator:(0,u.jsx)(C.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(j.Z,{gutter:[0,2],children:[(0,u.jsxs)(g.Z,{span:24,children:[(0,u.jsx)(v.Z.Item,{label:"Account Name",required:!0,children:(0,u.jsx)(y.Z,{disabled:o,showSearch:!0,allowClear:!0,placeholder:"Select an Account",optionFilterProp:"children",value:k.accountId,onChange:function(e){L({accountId:e})},filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:z})}),"debit"===k.transactionType?(0,u.jsx)(u.Fragment,{}):(0,u.jsx)(v.Z.Item,{label:"Company Name",required:!0,children:(0,u.jsx)(y.Z,{showSearch:!0,allowClear:!0,placeholder:"Select Company",optionFilterProp:"children",onChange:function(e){L({masterAccount:e})},filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},value:k.masterAccount,options:[{label:"S.P",value:"SP"},{label:"SL",value:"SL"},{label:"S.L(PR)",value:"SLQR"},{label:"Q.S",value:"QS"},{label:"PAR",value:"PAR"}]})})]}),(0,u.jsx)(g.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Amount",required:!0,children:(0,u.jsx)(Y.Z,{placeholder:"Enter Amount",max:l,type:"number",min:0,value:k.amount,onChange:function(e){return L({amount:e.target.value})}})})}),(0,u.jsx)(g.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Remark",required:!0,children:(0,u.jsx)(Y.Z,{placeholder:"Remark",value:k.remark,onChange:function(e){return L({remark:e.target.value})}})})}),(0,u.jsx)(g.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Date",required:!0,children:(0,u.jsx)(b.Z,{format:"DD MMM YYYY",onChange:function(e){L({date:new Date(e)})},value:J()(B()(k.date).format("YYYY-MM-DD"),"YYYY-MM-DD"),className:"w-100"})})})]})})})})})}));var ee=function(){function e(){(0,A.Z)(this,e)}return(0,w.Z)(e,null,[{key:"listLedger",value:function(e){return T.Z.get(this.baseURL+"/list-ledger/",{params:e})}},{key:"save",value:function(e){return T.Z.post(this.baseURL+"/list-ledger",e)}},{key:"delete",value:function(e){return T.Z.post(this.baseURL+"/list-ledger",{ids:e})}}]),e}();function te(e){var t=e.accountId,n=void 0===t?null:t,i=(0,a.useState)([]),l=(0,Z.Z)(i,2),r=l[0],o=l[1],s=(0,a.useState)(!1),c=(0,Z.Z)(s,2),d=c[0],h=c[1],m=(0,a.useState)([]),f=(0,Z.Z)(m,2),p=f[0],j=f[1],g=(0,a.useState)({page:1,limit:20,accountId:n}),v=(0,Z.Z)(g,2),y=v[0],b=v[1],S=(0,a.useRef)(),k=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Date",dataIndex:"date",width:200,render:function(e){return B()(e).format("DD MMM YYYY")}},{title:"Remarks",dataIndex:"remark",width:300},{title:"Debit",dataIndex:"amount",width:150,render:function(e,t){return"debit"===t.transactionType?e.toFixed(2):""}},{title:"Credit",dataIndex:"amount",width:150,render:function(e,t){return"credit"===t.transactionType?e.toFixed(2):""}},{title:"Balance",width:150,render:function(e,t){return t.previousCreditAmount-t.previousDebitAmount}}].filter((function(e){return!e.hidden}));function C(){h(!0),ee.listLedger(y).then((function(e){var t;o(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),b((0,x.Z)((0,x.Z)({},y),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var A=function(e){ee.delete(e).then((function(e){E(e.message),C(),j([])})).catch((function(e){E(e.message,"error")}))},w=k.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));w[0].fixed=!0,w[w.length-1].fixed="right";var T={bordered:!0,loading:d,title:function(){return(0,u.jsx)(ne,{addNewModalRef:S,selected:p,deleteData:A,qData:y,setQData:b,list:C})},size:"small",showHeader:!0,footer:function(){return(0,u.jsx)(O,{qData:y,setQData:b})},rowSelection:{onChange:function(e){j(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){C()}),[y.page,y.limit]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(P.Z,(0,x.Z)((0,x.Z)({},T),{},{pagination:{position:["none"],pageSize:y.limit},columns:w,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}}))})}function ne(e){e.addNewModalRef;var t=e.selected,n=e.deleteData,a=e.qData,i=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(j.Z,{gutter:[12,2],children:[(0,u.jsx)(g.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(b.Z.RangePicker,{format:"DD MMM YYYY",onChange:function(e){i((0,x.Z)((0,x.Z)({},a),{},{startTime:null!==e&&void 0!==e&&e[0]?new Date(e[0]):null,endTime:null!==e&&void 0!==e&&e[1]?new Date(e[1]):null}))}})})}),(0,u.jsx)(g.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsx)(g.Z,{span:10,children:t.length?(0,u.jsx)(L.Z,{title:"Are you sure to delete these selected data?",onConfirm:function(){n(t)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(N.Z,{}),children:"Delete Selected"})}):null})]})})}function ae(e){var t=e.type,n=(0,a.useState)([]),i=(0,Z.Z)(n,2),l=i[0],r=i[1],o=(0,a.useState)(!1),s=(0,Z.Z)(o,2),c=s[0],h=s[1],m=(0,a.useState)([]),f=(0,Z.Z)(m,2),p=f[0],j=f[1],g=(0,a.useState)({page:1,limit:20}),v=(0,Z.Z)(g,2),y=v[0],b=v[1],S=(0,a.useRef)(),C=(0,a.useRef)(),A=[{title:"#",width:44,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Name",dataIndex:"name"},{title:"Initial Amount",dataIndex:"initialAmount"},{title:"Action",dataIndex:"_id",width:110,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(L.Z,{title:"Are you sure to delete this Account data?",onConfirm:function(){T(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(N.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(M.Z,{}),onClick:function(){S.current.openForm(t)},style:{marginRight:"4px"}}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(z.Z,{}),onClick:function(){C.current.openForm({_id:t._id,name:t.name})}})]})}}].filter((function(e){return!e.hidden}));function w(){h(!0),I.list(y).then((function(e){var t;r(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),b((0,x.Z)((0,x.Z)({},y),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var T=function(e){I.delete(e).then((function(e){E(e.message),w(),j([])})).catch((function(e){E(e.message,"error")}))},D=A.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));D[0].fixed=!0,D[D.length-1].fixed="right";var R={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(ie,{addNewModalRef:S,selected:p,deleteData:T,qData:y,setQData:b,list:w})},showHeader:!0,footer:function(){return(0,u.jsx)(O,{qData:y,setQData:b})},rowSelection:{onChange:function(e){j(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){w()}),[y.page,y.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(k.Z.Title,{level:5,style:{margin:0},children:"List of  Accounts"}),(0,u.jsx)(P.Z,(0,x.Z)((0,x.Z)({},R),{},{pagination:{position:["none"],pageSize:y.limit},columns:D,dataSource:l.length?l:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(le,{ref:S,list:w,type:t}),(0,u.jsx)(re,{ref:C})]})}function ie(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,l=e.setQData,r=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(j.Z,{gutter:[12,2],children:[(0,u.jsx)(g.Z,{xs:{span:24},sm:{span:4},children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(Y.Z,{placeholder:"Search by name",onChange:function(e){l((0,x.Z)((0,x.Z)({},i),{},{key:e.target.value}))}})})}),(0,u.jsx)(g.Z,{xs:{span:24},sm:{span:3},children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",block:!0,htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(g.Z,{xs:{span:24},sm:{span:2},children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(_.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(L.Z,{title:"Are you sure to delete these selected Data?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(N.Z,{}),children:"Delete Selected"})}):null]})]})})}ee.baseURL="transation";var le=(0,a.forwardRef)((function(e,t){var n=e.list,i=(0,a.useState)(!1),l=(0,Z.Z)(i,2),r=l[0],o=l[1],s=(0,a.useState)({aspect:1}),c=(0,Z.Z)(s,2),h=c[0],m=c[1],f=(0,a.useState)(!1),y=(0,Z.Z)(f,2),b=y[0],S=y[1],k=function(e){m((0,x.Z)((0,x.Z)({},h),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),m(e?(0,x.Z)({},e):{status:!0})}}}));var A=function(){S(!0),I.save(h).then((function(e){E(e.message),k((0,x.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){S(!1)}))};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(F.Z,{title:(h._id?"Edit":"Add")+" Account Data",style:{top:20},open:r,okText:"Save",onOk:A,okButtonProps:{disabled:b},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:A,children:"Save"},"save")],children:(0,u.jsx)(p.Z,{spinning:b,indicator:(0,u.jsx)(C.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(j.Z,{gutter:[0,2],children:[(0,u.jsx)(g.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Name",required:!0,children:(0,u.jsx)(Y.Z,{placeholder:"Enter Name",value:h.name,onChange:function(e){return k({name:e.target.value})}})})}),(0,u.jsx)(g.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Initial Amount",required:!0,children:(0,u.jsx)(Y.Z,{placeholder:"initialAmount",value:h.initialAmount,onChange:function(e){return k({initialAmount:e.target.value})}})})})]})})})})})})),re=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,Z.Z)(n,2),l=i[0],r=i[1],o=(0,a.useState)({aspect:1}),s=(0,Z.Z)(o,2),c=s[0],d=s[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){r(!0),d(e?(0,x.Z)({},e):{})}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(F.Z,{title:(0,u.jsxs)(u.Fragment,{children:["Ledger of ",(0,u.jsx)("span",{style:{color:"red"},children:c.name})]}),style:{top:20},open:l,okText:"Save",onCancel:function(){r(!1)},maskClosable:!1,width:1600,destroyOnClose:!0,className:"app-modal-body-overflow",footer:null,children:(0,u.jsx)(te,{accountId:c._id})})})})),oe=n(7128),se=n(8748);function ce(){var e=(0,a.useState)({}),t=(0,Z.Z)(e,2),n=t[0],i=t[1],l=(0,a.useState)([]),r=(0,Z.Z)(l,2),o=r[0],s=r[1],c=(0,a.useState)(!1),d=(0,Z.Z)(c,2),h=d[0],f=d[1],y=(0,a.useState)(!1),b=(0,Z.Z)(y,2),S=b[0],A=(b[1],function(e,t){i((0,x.Z)((0,x.Z)({},n),{},(0,m.Z)({},t,e)))});return(0,a.useEffect)((function(){f(!0),se.Z.profile().then((function(e){var t,n;i(e.data.result||{}),null!==(t=e.data.result)&&void 0!==t&&t.avatar&&s([null===(n=e.data.result)||void 0===n?void 0:n.avatar])})).catch((function(e){E(e.message,"error")})).finally((function(){f(!1)}))}),[]),(0,a.useEffect)((function(){S&&(f(!0),se.Z.saveProfile(n).then((function(e){E(e.message)})).catch((function(e){E(e.message,"error")})).finally((function(){f(!1)})))}),[n]),(0,a.useEffect)((function(){A(null===o||void 0===o?void 0:o[0],"avatar")}),[o]),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(p.Z,{spinning:h,indicator:(0,u.jsx)(C.Z,{style:{fontSize:24},spin:!0}),children:[(0,u.jsx)(oe.Z,{}),(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(j.Z,{gutter:[12,2],children:[(0,u.jsx)(g.Z,{span:16,children:(0,u.jsxs)(j.Z,{gutter:[12,10],children:[(0,u.jsx)(g.Z,{span:12,children:(0,u.jsxs)(v.Z.Item,{label:(0,u.jsx)(k.Z.Text,{strong:!0,type:"secondary",children:"Name"}),children:[(0,u.jsx)(k.Z.Title,{editable:{editing:S,triggerType:S?"icon":"text",onChange:function(e){A(e,"name")}},level:5,children:n.name}),(0,u.jsx)(oe.Z,{style:{margin:0}})]})}),(0,u.jsx)(g.Z,{span:12,children:(0,u.jsxs)(v.Z.Item,{label:(0,u.jsx)(k.Z.Text,{strong:!0,type:"secondary",children:"User Name"}),children:[(0,u.jsx)(k.Z.Title,{editable:{editing:S,triggerType:S?"icon":"text",onChange:function(e){A(e,"userName")}},level:5,children:n.userName}),(0,u.jsx)(oe.Z,{style:{margin:0}})]})}),(0,u.jsx)(g.Z,{span:12,children:(0,u.jsxs)(v.Z.Item,{label:(0,u.jsx)(k.Z.Text,{strong:!0,type:"secondary",children:"Email"}),children:[(0,u.jsx)(k.Z.Title,{editable:{editing:S,triggerType:S?"icon":"text",onChange:function(e){A(e,"email")}},level:5,children:n.email}),(0,u.jsx)(oe.Z,{style:{margin:0}})]})}),(0,u.jsx)(g.Z,{span:12,children:(0,u.jsxs)(v.Z.Item,{label:(0,u.jsx)(k.Z.Text,{strong:!0,type:"secondary",children:"Phone Number"}),children:[(0,u.jsx)(k.Z.Title,{editable:{editing:S,triggerType:S?"icon":"text",onChange:function(e){A(e,"phone")}},level:5,children:n.phone}),(0,u.jsx)(oe.Z,{style:{margin:0}})]})})]})}),(0,u.jsx)(g.Z,{span:8})]})})]})})}function de(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(i.Z,{style:{minHeight:"100vh"},children:(0,u.jsxs)(i.Z,{className:"site-layout",children:[(0,u.jsx)(i.Z.Header,{style:{padding:0,height:"auto"},children:(0,u.jsx)(l.Z,{theme:"dark",mode:"horizontal",items:[{label:(0,u.jsx)(o.rU,{to:"/dashboard",children:"Dashboard"}),key:"dashboard"},{label:(0,u.jsx)(o.rU,{to:"/accounts",children:"Account"}),key:"accounts"},{label:(0,u.jsx)(o.rU,{to:"/transaction",children:"Transactions"}),key:"transaction"},{label:(0,u.jsx)("span",{style:{color:"red"},onClick:function(){localStorage.clear(),window.location.reload()},children:"Logout"}),key:"transaction"}]})}),(0,u.jsx)(i.Z.Content,{children:(0,u.jsx)(r.Z,{style:{borderRadius:"none"},children:(0,u.jsxs)(s.Z5,{children:[(0,u.jsx)(s.AW,{path:"dashboard/",element:(0,u.jsx)(R,{})}),(0,u.jsx)(s.AW,{path:"accounts/",element:(0,u.jsx)(ae,{})}),(0,u.jsx)(s.AW,{path:"transaction/",element:(0,u.jsx)(K,{})}),(0,u.jsx)(s.AW,{path:"profile/",element:(0,u.jsx)(ce,{})}),(0,u.jsx)(s.AW,{path:"*",element:(0,u.jsx)(h,{})})]})})})]})})})}}}]);
//# sourceMappingURL=78.b499ff19.chunk.js.map